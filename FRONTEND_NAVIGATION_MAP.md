# –ö–∞—Ä—Ç–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ Legal Diff

## üìä 1. –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –º–∞—Ä—à—Ä—É—Ç—ã

### –¢–∞–±–ª–∏—Ü–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

| –°—Ç—Ä–∞–Ω–∏—Ü–∞ | –ú–∞—Ä—à—Ä—É—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
|----------|---------|------------|-----------|
| **DashboardPage** | `/dashboard` | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | - |
| **DocumentPage** | `/document/:id` | –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ | `id` - ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ |
| **ReviewPage** | `/review/:workspaceFileId` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–ª–µ–π –ø—Ä–∞–≤–æ–∫ | `workspaceFileId` - ID —Ñ–∞–π–ª–∞ –ø—Ä–∞–≤–æ–∫ |
| **DiffPage** | `/diff/:workspaceFileId` | –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π (diff) | `workspaceFileId` - ID —Ñ–∞–π–ª–∞ –ø—Ä–∞–≤–æ–∫ |
| **EditsPage** | `/edits` | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø—Ä–∞–≤–æ–∫ | - |

### –°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏

```
Dashboard ‚Üí Document ‚Üí Review ‚Üí Diff
   ‚Üë          ‚Üë          ‚Üë        ‚Üë
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         (–∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥")
```

**–û—Å–Ω–æ–≤–Ω–æ–π flow:**
1. **Dashboard** ‚Üí –∫–ª–∏–∫ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç ‚Üí **Document** (`/document/{id}`)
2. **Document** ‚Üí "–ù–∞–π—Ç–∏ —Ü–µ–ª–∏" ‚Üí **Review** (`/review/{workspaceFileId}`)
3. **Review** ‚Üí "–ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∫–∏" ‚Üí **Diff** (`/diff/{workspaceFileId}`)
4. **Diff** ‚Üí "–ù–∞–∑–∞–¥" ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ **Review** –∏–ª–∏ **Document**

**EditsPage** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –Ω–µ —Å–≤—è–∑–∞–Ω–∞ —Å –æ—Å–Ω–æ–≤–Ω—ã–º flow.

---

## üå≥ 2. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –î–µ—Ä–µ–≤–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (4 —É—Ä–æ–≤–Ω—è)

```
Level 1: Dashboard (/dashboard)
  ‚îî‚îÄ Level 2: Document (/document/:id)
       ‚îú‚îÄ Level 2.1: Workspace Files (—Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –ø—Ä–∞–≤–æ–∫)
       ‚îÇ    ‚îî‚îÄ Level 3: Review (/review/:workspaceFileId)
       ‚îÇ         ‚îú‚îÄ Level 3.1: Edit Target Modal (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–ª–∏)
       ‚îÇ         ‚îÇ    ‚îî‚îÄ Level 4: Article Search (–ø–æ–∏—Å–∫ —Å—Ç–∞—Ç—å–∏)
       ‚îÇ         ‚îî‚îÄ Level 3.2: Add Target Modal (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∫–∏)
       ‚îÇ              ‚îî‚îÄ Level 4: Article Search (–ø–æ–∏—Å–∫ —Å—Ç–∞—Ç—å–∏)
       ‚îî‚îÄ Level 2.2: Quick Actions
            ‚îú‚îÄ Search (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ - navigate(`/search/${id}`))
            ‚îî‚îÄ Versions (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ - navigate(`/versions/${id}`))
       ‚îî‚îÄ Level 3: Diff (/diff/:workspaceFileId)
            ‚îî‚îÄ Level 3.1: Diff Viewer (ReactDiffViewer)
                 ‚îî‚îÄ Level 4: Navigation (–ø—Ä–µ–¥—ã–¥—É—â–µ–µ/—Å–ª–µ–¥—É—é—â–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ)
```

### –°—Ö–µ–º–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (Mermaid)

```mermaid
graph TD
    A[Dashboard<br/>/dashboard] -->|–ö–ª–∏–∫ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç| B[Document<br/>/document/:id]
    B -->|–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∞–≤–∫–∏| C[Workspace Files<br/>–≤–Ω—É—Ç—Ä–∏ Document]
    C -->|–ù–∞–π—Ç–∏ —Ü–µ–ª–∏| D[Review<br/>/review/:workspaceFileId]
    D -->|–ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–ª—å| E[Edit Target Modal]
    E -->|–ü–æ–∏—Å–∫ —Å—Ç–∞—Ç—å–∏| F[Article Search<br/>Autocomplete]
    D -->|–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∫—É| G[Add Target Modal]
    G -->|–ü–æ–∏—Å–∫ —Å—Ç–∞—Ç—å–∏| F
    D -->|–ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∫–∏| H[Diff<br/>/diff/:workspaceFileId]
    H -->|–ù–∞–≤–∏–≥–∞—Ü–∏—è| I[Diff Viewer<br/>ReactDiffViewer]
    H -->|–≠–∫—Å–ø–æ—Ä—Ç| J[Excel Export]
    H -->|–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å| K[Commit Version]
    
    L[EditsPage<br/>/edits] -.->|–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è| M[Extract Edits<br/>–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style D fill:#ffe1f5
    style H fill:#e1ffe1
    style L fill:#f0f0f0,stroke-dasharray: 5 5
```

---

## üß© 3. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|-----------|---------------|-----------|
| **Button** | –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã | –ù–∏–∑–∫–∞—è |
| **Card** | –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã | –ù–∏–∑–∫–∞—è |
| **Modal** | Dashboard, Document, Review | –°—Ä–µ–¥–Ω—è—è |
| **FileUpload** | Dashboard, Document, EditsPage | –°—Ä–µ–¥–Ω—è—è |
| **LoadingSpinner** | –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã | –ù–∏–∑–∫–∞—è |
| **Input** | Review (–ø–æ–∏—Å–∫) | –ù–∏–∑–∫–∞—è |
| **Toast** | Dashboard, EditsPage | –ù–∏–∑–∫–∞—è |
| **DocumentStructure** | Dashboard (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ) | –°—Ä–µ–¥–Ω—è—è |
| **EditsReview** | EditsPage | –°—Ä–µ–¥–Ω—è—è |
| **DeletingWidget** | Dashboard | –ù–∏–∑–∫–∞—è |

### –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

#### 1. **ReviewPage** (575 —Å—Ç—Ä–æ–∫)
**–£—Å–ª–æ–≤–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞:**
- `isLoading` ‚Üí –ø–æ–∫–∞–∑ —Å–ø–∏–Ω–Ω–µ—Ä–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- `targets.length === 0` ‚Üí –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `targets.map()` ‚Üí —Å–ø–∏—Å–æ–∫ —Ü–µ–ª–µ–π —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- `editingTarget` ‚Üí –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `isAddingTarget` ‚Üí –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
- `hasUnconfirmed` ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∫–∏"
- `target.article_exists === false` ‚Üí –∫—Ä–∞—Å–Ω—ã–π badge
- `target.article_id` ‚Üí –æ—Ä–∞–Ω–∂–µ–≤—ã–π/—Å–∏–Ω–∏–π badge

**–°–æ—Å—Ç–æ—è–Ω–∏—è:**
- `targets` - —Å–ø–∏—Å–æ–∫ —Ü–µ–ª–µ–π
- `isLoading` - –∑–∞–≥—Ä—É–∑–∫–∞
- `taskStatus` - —Å—Ç–∞—Ç—É—Å Celery –∑–∞–¥–∞—á–∏
- `editingTarget` - —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–∞—è —Ü–µ–ª—å
- `searchQuery` - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
- `searchResults` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞
- `isSearching` - –ø–æ–∏—Å–∫ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
- `isAddingTarget` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ü–µ–ª–∏
- `newInstructionText` - —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ–π –ø—Ä–∞–≤–∫–∏
- `newArticleId` - –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è

#### 2. **DiffPage** (332 —Å—Ç—Ä–æ–∫–∏)
**–£—Å–ª–æ–≤–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞:**
- `isLoading` ‚Üí —Å–ø–∏–Ω–Ω–µ—Ä
- `diffs.length === 0` ‚Üí –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `currentDiff` ‚Üí –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ diff viewer
- `diffs.length > 1` ‚Üí –Ω–∞–≤–∏–≥–∞—Ü–∏—è (–ø—Ä–µ–¥—ã–¥—É—â–µ–µ/—Å–ª–µ–¥—É—é—â–µ–µ)
- `isPolling` ‚Üí –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `isDarkTheme` ‚Üí —Ç–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –¥–ª—è diff viewer

**–°–æ—Å—Ç–æ—è–Ω–∏—è:**
- `diffs` - —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `currentIndex` - —Ç–µ–∫—É—â–∏–π –∏–Ω–¥–µ–∫—Å
- `isLoading` - –∑–∞–≥—Ä—É–∑–∫–∞
- `isCommitting` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
- `isExporting` - —ç–∫—Å–ø–æ—Ä—Ç
- `totalTargets` - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–µ–ª–µ–π
- `isPolling` - –æ–ø—Ä–æ—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- `pollingIntervalRef` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª

#### 3. **DocumentPage** (272 —Å—Ç—Ä–æ–∫–∏)
**–£—Å–ª–æ–≤–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞:**
- `isLoading` ‚Üí —Å–ø–∏–Ω–Ω–µ—Ä
- `!document` ‚Üí –æ—à–∏–±–∫–∞ "–î–æ–∫—É–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω"
- `workspaceFiles.length > 0` ‚Üí —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –ø—Ä–∞–≤–æ–∫
- `isUploadModalOpen` ‚Üí –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–≥—Ä—É–∑–∫–∏

**–°–æ—Å—Ç–æ—è–Ω–∏—è:**
- `document` - —Ç–µ–∫—É—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
- `workspaceFiles` - —Ñ–∞–π–ª—ã –ø—Ä–∞–≤–æ–∫
- `isLoading` - –∑–∞–≥—Ä—É–∑–∫–∞
- `isUploadModalOpen` - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- `isUploading` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞

#### 4. **DashboardPage** (276 —Å—Ç—Ä–æ–∫)
**–£—Å–ª–æ–≤–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞:**
- `isLoading` ‚Üí —Å–∫–µ–ª–µ—Ç–æ–Ω—ã (SkeletonCard)
- `documents.length === 0` ‚Üí –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `documents.map()` ‚Üí —Å–µ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `deletingId === doc.id` ‚Üí DeletingWidget
- `selectedDocument` ‚Üí –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- `isUploadModalOpen` ‚Üí –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–≥—Ä—É–∑–∫–∏

**–°–æ—Å—Ç–æ—è–Ω–∏—è:**
- `documents` - —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `isLoading` - –∑–∞–≥—Ä—É–∑–∫–∞
- `isUploadModalOpen` - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- `isUploading` - –∑–∞–≥—Ä—É–∑–∫–∞
- `selectedDocument` - –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
- `deletingId` - —É–¥–∞–ª—è–µ–º—ã–π –¥–æ–∫—É–º–µ–Ω—Ç

---

## üîç 4. –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞

### –°–∞–º—ã–µ –±–æ–ª—å—à–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å—Ç—Ä–æ–∫)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ü—Ä–æ–±–ª–µ–º—ã |
|-----------|------------|-----------|----------|
| **ReviewPage.tsx** | ~575 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –ú–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π, —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω, polling |
| **DiffPage.tsx** | ~332 | ‚≠ê‚≠ê‚≠ê‚≠ê | Polling, –Ω–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É diff, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ReactDiffViewer |
| **DashboardPage.tsx** | ~276 | ‚≠ê‚≠ê‚≠ê | –ú–Ω–æ–≥–æ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º |
| **DocumentPage.tsx** | ~272 | ‚≠ê‚≠ê‚≠ê | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ workspace files, –∑–∞–ø—É—Å–∫ Phase1 |
| **EditsPage.tsx** | ~140 | ‚≠ê‚≠ê | –ü—Ä–æ—Å—Ç–∞—è, –Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è |

### –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞

#### ReviewPage - —Å–∞–º–∞—è —Å–ª–æ–∂–Ω–∞—è
**–ü—Ä–æ–±–ª–µ–º—ã:**
1. **–ú–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π** (9 useState hooks)
2. **Polling –ª–æ–≥–∏–∫–∞** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Celery –∑–∞–¥–∞—á–∏
3. **–î–≤–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–Ω–∞** —Å –æ–±—â–µ–π –ª–æ–≥–∏–∫–æ–π –ø–æ–∏—Å–∫–∞
4. **Debounced autocomplete** - –ø–æ–∏—Å–∫ —Å—Ç–∞—Ç–µ–π —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
5. **–£—Å–ª–æ–≤–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞** –∫–Ω–æ–ø–∫–∏ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∫–∏"
6. **–†–∞–∑–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã —Ü–µ–ª–µ–π** - pending, review, completed

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –ø–æ–∏—Å–∫–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ö—É–∫ `useArticleSearch`
- –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: `TargetList`, `EditTargetModal`, `AddTargetModal`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Query –¥–ª—è polling

#### DiffPage - –≤—Ç–æ—Ä–∞—è –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
**–ü—Ä–æ–±–ª–µ–º—ã:**
1. **Polling –ª–æ–≥–∏–∫–∞** - –æ–ø—Ä–æ—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π diff
2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏** - –Ω—É–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—á–∏—â–∞—Ç—å
3. **–ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É diff** - —Å–æ—Å—Ç–æ—è–Ω–∏–µ currentIndex
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ReactDiffViewer** - –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –í—ã–Ω–µ—Å—Ç–∏ polling –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ö—É–∫ `useDiffPolling`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Query –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è polling
- –í—ã–Ω–µ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ReactDiffViewer –≤ –∫–æ–Ω—Ñ–∏–≥

### –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ/–Ω–µ–ø–æ–ª–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

1. **EditsPage** (`/edits`)
   - –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
   - –ù–µ —Å–≤—è–∑–∞–Ω–∞ —Å –æ—Å–Ω–æ–≤–Ω—ã–º flow
   - –ü–æ—Ö–æ–∂–µ –Ω–∞ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ DocumentPage

2. **Search** (`/search/:id`)
   - –£–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ DocumentPage (—Å—Ç—Ä–æ–∫–∞ 227)
   - –ù–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å —Å—Å—ã–ª–∫—É

3. **Versions** (`/versions/:id`)
   - –£–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ DocumentPage (—Å—Ç—Ä–æ–∫–∞ 241)
   - –ù–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å —Å—Å—ã–ª–∫—É

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –°—Ç—Ä–∞–Ω–∏—Ü—ã (Pages)

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ | useState | useEffect | useRef | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|------|-------|----------|-----------|--------|-----------|
| ReviewPage.tsx | ~575 | 9 | 2 | 0 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| DiffPage.tsx | ~332 | 7 | 2 | 2 | ‚≠ê‚≠ê‚≠ê‚≠ê |
| DashboardPage.tsx | ~276 | 6 | 1 | 0 | ‚≠ê‚≠ê‚≠ê |
| DocumentPage.tsx | ~272 | 5 | 1 | 0 | ‚≠ê‚≠ê‚≠ê |
| EditsPage.tsx | ~140 | 3 | 0 | 0 | ‚≠ê‚≠ê |

### UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç—Ä–æ–∫ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-------|------------|
| EditsReview.tsx | ? | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –ø—Ä–∞–≤–æ–∫ |
| DocumentStructure.tsx | ? | –î–µ—Ä–µ–≤–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞ |
| Modal.tsx | ? | –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ |
| FileUpload.tsx | ? | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ |
| Button.tsx | ? | –ö–Ω–æ–ø–∫–∞ |
| Card.tsx | ? | –ö–∞—Ä—Ç–æ—á–∫–∞ |
| Input.tsx | ? | –ü–æ–ª–µ –≤–≤–æ–¥–∞ |
| LoadingSpinner.tsx | ? | –°–ø–∏–Ω–Ω–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ |
| Toast.tsx | ? | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| DeletingWidget.tsx | ? | –í–∏–¥–∂–µ—Ç —É–¥–∞–ª–µ–Ω–∏—è |

---

## üó∫Ô∏è –ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (Mermaid)

```mermaid
flowchart TD
    Start([–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å]) --> Dashboard[Dashboard<br/>/dashboard<br/>276 —Å—Ç—Ä–æ–∫]
    
    Dashboard -->|–ö–ª–∏–∫ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç| Document[Document<br/>/document/:id<br/>272 —Å—Ç—Ä–æ–∫–∏]
    Dashboard -->|–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç| UploadModal[Modal: FileUpload]
    Dashboard -->|–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É| StructureModal[Modal: DocumentStructure]
    
    Document -->|–ù–∞–∑–∞–¥| Dashboard
    Document -->|–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∞–≤–∫–∏| UploadEditsModal[Modal: FileUpload]
    Document -->|–ù–∞–π—Ç–∏ —Ü–µ–ª–∏| Review[Review<br/>/review/:workspaceFileId<br/>575 —Å—Ç—Ä–æ–∫]
    Document -->|–ü–æ–∏—Å–∫| SearchPage[Search<br/>/search/:id<br/>–ù–ï –°–£–©–ï–°–¢–í–£–ï–¢]
    Document -->|–í–µ—Ä—Å–∏–∏| VersionsPage[Versions<br/>/versions/:id<br/>–ù–ï –°–£–©–ï–°–¢–í–£–ï–¢]
    
    Review -->|–ù–∞–∑–∞–¥| Document
    Review -->|–ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–ª—å| EditTargetModal[Modal: Edit Target<br/>+ Article Search]
    Review -->|–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∫—É| AddTargetModal[Modal: Add Target<br/>+ Article Search]
    Review -->|–ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∫–∏| Diff[Diff<br/>/diff/:workspaceFileId<br/>332 —Å—Ç—Ä–æ–∫–∏]
    
    Diff -->|–ù–∞–∑–∞–¥| Review
    Diff -->|–≠–∫—Å–ø–æ—Ä—Ç Excel| ExportExcel[Excel Export]
    Diff -->|–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å| CommitVersion[Commit Version]
    Diff -->|–ù–∞–≤–∏–≥–∞—Ü–∏—è| DiffNavigation[Previous/Next Diff]
    
    EditsPage[EditsPage<br/>/edits<br/>140 —Å—Ç—Ä–æ–∫<br/>–ò–ó–û–õ–ò–†–û–í–ê–ù–ê] -.->|–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è| ExtractEdits[Extract Edits]
    
    style Dashboard fill:#e1f5ff
    style Document fill:#fff4e1
    style Review fill:#ffe1f5
    style Diff fill:#e1ffe1
    style EditsPage fill:#f0f0f0,stroke-dasharray: 5 5
    style SearchPage fill:#ffcccc,stroke-dasharray: 5 5
    style VersionsPage fill:#ffcccc,stroke-dasharray: 5 5
```

---

## üéØ –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **ReviewPage —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–∞—è** (575 —Å—Ç—Ä–æ–∫, 9 —Å–æ—Å—Ç–æ—è–Ω–∏–π)
   - –ù—É–∂–Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
   - –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –≤ —Ö—É–∫–∏

2. **–ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**
   - `/search/:id` - —Å—Å—ã–ª–∫–∞ –µ—Å—Ç—å, —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ—Ç
   - `/versions/:id` - —Å—Å—ã–ª–∫–∞ –µ—Å—Ç—å, —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ—Ç
   - **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å —Å—Å—ã–ª–∫–∏

3. **EditsPage –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞**
   - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º flow
   - **–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

1. **–†–∞–∑–¥–µ–ª–∏—Ç—å ReviewPage:**
   ```
   ReviewPage/
     ‚îú‚îÄ‚îÄ TargetList.tsx
     ‚îú‚îÄ‚îÄ EditTargetModal.tsx
     ‚îú‚îÄ‚îÄ AddTargetModal.tsx
     ‚îî‚îÄ‚îÄ useArticleSearch.ts (hook)
   ```

2. **–°–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
   - `SearchPage.tsx` –¥–ª—è `/search/:id`
   - `VersionsPage.tsx` –¥–ª—è `/versions/:id`

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Query:**
   - –î–ª—è polling (ReviewPage, DiffPage)
   - –î–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∑–∞–≥—Ä—É–∑–∫–∏

4. **–í—ã–Ω–µ—Å—Ç–∏ –æ–±—â—É—é –ª–æ–≥–∏–∫—É:**
   - `usePolling.ts` - —Ö—É–∫ –¥–ª—è polling
   - `useArticleSearch.ts` - —Ö—É–∫ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å—Ç–∞—Ç–µ–π
   - `useWorkspaceFile.ts` - —Ö—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å workspace files

---

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2026-01-21  
**–í–µ—Ä—Å–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:** React + TypeScript + Vite
